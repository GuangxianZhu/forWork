[Start Tool]
|
|-- [Step 1: Select Sensor Type]
|     |-- Sensor Type A
|     |-- Sensor Type B
|     |-- Sensor Type C
|
|-- [Step 2: Enter Communication Parameters]
|     |-- Input ttyR number (e.g. ttyR0)
|     |-- Input Address (hex or decimal)
|     |-- Input Channel (if required by sensor)
|     |-- [Optional] Set loop test mode?
|          |-- No → One-shot test
|          |-- Yes
|               |-- Input delay between messages (ms)
|               |-- Input max loop count or "infinite"
|
|-- [Step 3: Generate Message]
|     |-- Use selected sensor template
|     |-- Replace placeholders with Addr, Chnl, etc.
|     |-- Append CRC/checksum if needed
|     |-- Display constructed message (Hex)
|
|-- [Step 4: Send Message to Sensor]
|     |-- Open port (/dev/ttyR*)
|          |-- If open fail → Show error → Retry or Exit
|     |-- Send message via RS485 class
|     |-- Wait for reply
|          |-- Timeout? → Show error
|          |-- Receive data
|               |-- No data → Show error (No reply)
|               |-- Partial data → Show warning
|               |-- Full data → Display raw response
|
|-- [Step 5: Display Result]
|     |-- Print:
|          |-- Sent message (hex)
|          |-- Received reply (hex)
|     |-- User manually reads/validates response
|
|-- [Step 6: Post-Response Options]
|     |-- One-shot Mode:
|          |-- [1] Retry same test
|          |-- [2] Back to sensor selection
|          |-- [3] Exit
|
|     |-- Loop Test Mode:
|          |-- Repeat Steps 3–5 after delay
|          |-- On fail:
|               |-- [1] Continue loop
|               |-- [2] Abort loop
|          |-- After loop ends → Show loop summary
|               |-- Success count
|               |-- Failure count
|               |-- Average delay (optional)
|
[End Tool]
